<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <title>Where Should We Eat?</title>
    <meta name="description" content="A simple weighted fortune wheel to pick where to eat." />
    <link rel="icon" href="./assets/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="header__inner">
        <div class="brand">
          <div class="brand__mark" aria-hidden="true">ðŸŽ¡</div>
          <div class="brand__text">
            <h1>Where Should We Eat?</h1>
            <p class="muted">Add restaurants + weights, then spin.</p>
          </div>
        </div>
        <div class="header__actions">
          <button id="btnAddSample" class="btn btn--ghost" type="button">Add sample</button>
          <button id="btnExport" class="btn btn--ghost" type="button">Export</button>
          <label class="btn btn--ghost file-btn">
            Import
            <input id="fileImport" type="file" accept="application/json" />
          </label>
          <button id="btnReset" class="btn btn--danger" type="button">Reset</button>
        </div>
      </div>
    </header>

    <main class="layout">
      <section class="card wheel-card" aria-label="Wheel">
        <div class="wheel-wrap">
          <div class="pointer" aria-hidden="true"></div>
          <canvas id="wheel" width="700" height="700" aria-label="Fortune wheel"></canvas>
          <button id="btnSpin" class="spin" type="button" aria-label="Spin the wheel">
            <span class="spin__label">SPIN</span>
          </button>
        </div>
        <div class="result" role="status" aria-live="polite">
          <div class="result__title muted">Result</div>
          <div id="resultText" class="result__value">â€”</div>
          <div id="resultMeta" class="result__meta muted"></div>
        </div>
      </section>

      <section class="card list-card" aria-label="Restaurants">
        <div class="card__header">
          <h2>Restaurants</h2>
          <p class="muted">Weights are relative (e.g. 2 is twice as likely as 1).</p>
        </div>

        <form id="addForm" class="add" autocomplete="off">
          <div class="field">
            <label for="name">Name</label>
            <input id="name" name="name" type="text" placeholder="e.g. Falafel House" required maxlength="60" />
          </div>
          <div class="field">
            <label for="weight">Weight</label>
            <input id="weight" name="weight" type="number" inputmode="decimal" min="0.01" step="0.01" value="1" required />
          </div>
          <button class="btn btn--primary" type="submit">Add</button>
        </form>

        <div class="list" id="list"></div>
        <div class="hint muted" id="emptyHint">Add at least 2 restaurants to spin.</div>
      </section>
    </main>

    <footer class="footer muted">
      <span>Runs locally in your browser. Data stays on this device (localStorage).</span>
    </footer>

    <dialog id="dialog" class="dialog">
      <form method="dialog" class="dialog__inner">
        <div class="dialog__title">Letâ€™s eat at</div>
        <div id="dialogValue" class="dialog__value">â€”</div>
        <div id="dialogSubtitle" class="dialog__subtitle muted"></div>
        <div class="dialog__actions">
          <button id="btnSpinAgain" class="btn btn--primary" value="again">Spin again</button>
          <button class="btn" value="close">Close</button>
        </div>
      </form>
    </dialog>

    <canvas id="confetti" class="confetti" aria-hidden="true"></canvas>

    <script src="./app.js" type="module"></script>
  </body>
</html>
